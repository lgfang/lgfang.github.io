<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>Python Coding in Emacs</title>
<!-- 2016-09-15 Thu 10:01 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Fang Lungang" />
<link rel="stylesheet" type="text/css" href="../cssjs/lgfang.css" />

<script type="text/javascript" src="../cssjs/org-info.js">
/**
 *
 * @source: ../cssjs/org-info.js
 *
 * @licstart  The following is the entire license notice for the
 *  JavaScript code in ../cssjs/org-info.js.
 *
 * Copyright (C) 2012-2013 Free Software Foundation, Inc.
 *
 *
 * The JavaScript code in this tag is free software: you can
 * redistribute it and/or modify it under the terms of the GNU
 * General Public License (GNU GPL) as published by the Free Software
 * Foundation, either version 3 of the License, or (at your option)
 * any later version.  The code is distributed WITHOUT ANY WARRANTY;
 * without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.
 *
 * As additional permission under GNU GPL version 3 section 7, you
 * may distribute non-source (e.g., minimized or compacted) forms of
 * that code without the copy of the GNU GPL normally required by
 * section 4, provided you include this license notice and a URL
 * through which recipients can access the Corresponding Source.
 *
 * @licend  The above is the entire license notice
 * for the JavaScript code in ../cssjs/org-info.js.
 *
 */
</script>

<script type="text/javascript">

/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/

<!--/*--><![CDATA[/*><!--*/
org_html_manager.set("TOC_DEPTH", "2");
org_html_manager.set("LINK_HOME", "../../index.html");
org_html_manager.set("LINK_UP", "../index.html");
org_html_manager.set("LOCAL_TOC", "0");
org_html_manager.set("VIEW_BUTTONS", "0");
org_html_manager.set("MOUSE_HINT", "underline");
org_html_manager.set("FIXED_TOC", "0");
org_html_manager.set("TOC", "1");
org_html_manager.set("VIEW", "showall");
org_html_manager.setup();  // activate after the parameters are set
/*]]>*///-->
</script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div class="container-narrow">
<div id="content">
<h1 class="title">Python Coding in Emacs</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. About this slides</a></li>
<li><a href="#sec-2">2. Online manual</a></li>
<li><a href="#sec-3">3. Cross reference</a></li>
<li><a href="#sec-4">4. Lint</a>
<ul>
<li><a href="#sec-4-1">4.1. Fly check</a></li>
<li><a href="#sec-4-2">4.2. Check on demand</a></li>
</ul>
</li>
<li><a href="#sec-5">5. Code assistant</a>
<ul>
<li><a href="#sec-5-1">5.1. List of possible completion</a></li>
<li><a href="#sec-5-2">5.2. Call signature help</a></li>
</ul>
</li>
<li><a href="#sec-6">6. Unit Test</a>
<ul>
<li><a href="#sec-6-1">6.1. Launch unitest command</a></li>
<li><a href="#sec-6-2">6.2. Get the result</a></li>
<li><a href="#sec-6-3">6.3. To set default compile command for python</a></li>
</ul>
</li>
<li><a href="#sec-7">7. Refactoring</a>
<ul>
<li><a href="#sec-7-1">7.1. Load ropemacs</a></li>
<li><a href="#sec-7-2">7.2. Init the "project"</a></li>
<li><a href="#sec-7-3">7.3. rope-rename</a>
<ul>
<li><a href="#sec-7-3-1">7.3.1. Suppose pylint complained an invalid name</a></li>
<li><a href="#sec-7-3-2">7.3.2. With point on that variable, <code>M-x rope-rename</code> (or <code>C-c r r</code>)</a></li>
<li><a href="#sec-7-3-3">7.3.3. And press "&lt;enter&gt;"</a></li>
</ul>
</li>
<li><a href="#sec-7-4">7.4. And more</a></li>
</ul>
</li>
<li><a href="#sec-8">8. Re-format code with PythonTidy</a></li>
<li><a href="#sec-9">9. Configuration</a>
<ul>
<li><a href="#sec-9-1">9.1. Cscope</a></li>
<li><a href="#sec-9-2">9.2. Pylint</a>
<ul>
<li><a href="#sec-9-2-1">9.2.1. Download</a></li>
<li><a href="#sec-9-2-2">9.2.2. Install pylint</a></li>
<li><a href="#sec-9-2-3">9.2.3. Install elisp</a></li>
<li><a href="#sec-9-2-4">9.2.4. Hot keys</a></li>
<li><a href="#sec-9-2-5">9.2.5. The "flycheck"</a></li>
</ul>
</li>
<li><a href="#sec-9-3">9.3. Jedi</a></li>
<li><a href="#sec-9-4">9.4. Ropemacs</a>
<ul>
<li><a href="#sec-9-4-1">9.4.1. Install</a></li>
<li><a href="#sec-9-4-2">9.4.2. Configure Emacs</a></li>
<li><a href="#sec-9-4-3">9.4.3. Verify pymacs</a></li>
</ul>
</li>
<li><a href="#sec-9-5">9.5. Install PythonTidy</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> About this slides</h2>
<div class="outline-text-2" id="text-1">
<ol class="org-ol">
<li>Is an HTML slides. To view it in slides mode,
<ol class="org-ol">
<li>Press <code>x</code> to enter "slides mode".
</li>
<li>Click mouse for next page.
</li>
<li>Press <code>?</code> for more help.
</li>
</ol>
</li>
<li>Showcases what facilities Emacs provides with regard to Python coding.
</li>
<li>Give defails on how to set up demonstrated features at the end.
</li>
<li>Refer to <a href="https://www.emacswiki.org/emacs/PythonProgrammingInEmacs">https://www.emacswiki.org/emacs/PythonProgrammingInEmacs</a> for more
on this topic
</li>
</ol>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> Online manual</h2>
<div class="outline-text-2" id="text-2">
<ol class="org-ol">
<li>Install command line tool "pydoc" if not alread.
</li>
<li>Install from melpa using <code>M-x pack-install&lt;enter&gt;pydoc&lt;enter&gt;</code> (or download
&amp; install it manually from <a href="https://github.com/statmobile/pydoc">https://github.com/statmobile/pydoc</a>).
</li>
<li><code>M-x pydoc&lt;enter&gt;</code> to serch for doc.
</li>
</ol>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> Cross reference</h2>
<div class="outline-text-2" id="text-3">
<ul class="org-ul">
<li>Go to definitions
<ul class="org-ul">
<li>Jedi: it is very convenient if all you want is going to definitions.
</li>
<li>Imenu: if "jedi" is not available, "imenu" (<code>F2</code> according to my
configure) helps you jump to definitions within the current buffer.
</li>
</ul>
</li>

<li>cscope: Actually, "cscope" supports Python. Therefore, if you are already
using cscope, you need no extra configure.
</li>

<li>pycscope: "pycscope" is supposed to be a little bit more accurate than
cscope because it "uses Python's own parser and (C)oncrete (S)yntax (T)ree".
Simply build the database with "pycscope" (set "cscope-program" to
"pycscope").
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> Lint</h2>
<div class="outline-text-2" id="text-4">
<p>
"pylint" helps to find out programming errors as well as offenses of
coding style. For explanations of "pylint" messages, refer to
<a href="http://pylint-messages.wikidot.com/">http://pylint-messages.wikidot.com/</a>. For my pylint configure
(<code>~/.pylintrc</code>), refer to <a href="../util/lgfang.pylintrc">../util/lgfang.pylintrc</a>.
</p>

<p>
After <a href="#sec-9-2">installing pylint</a>, we can either:
</p>
</div>

<div id="outline-container-sec-4-1" class="outline-3">
<h3 id="sec-4-1"><span class="section-number-3">4.1</span> Fly check</h3>
<div class="outline-text-3" id="text-4-1">

<div class="figure">
<p><img src="./emacs-screen/py-pylint-2.png" alt="py-pylint-2.png" width="600" />
</p>
</div>

<p>
If fly check enabled, problematic lines should be highlighted
"automatically". Moving cursor to those lines, corresponding error messages
should show up in the mini buffer (echo area)
</p>

<p>
No surprise that, if you are running a GUI version of Emacs, hovering
the pointer on a line will trigger a balloon tip.
</p>
</div>
</div>

<div id="outline-container-sec-4-2" class="outline-3">
<h3 id="sec-4-2"><span class="section-number-3">4.2</span> Check on demand</h3>
<div class="outline-text-3" id="text-4-2">
<p>
Another way is to manually do the check via <code>M-x pylint</code>.
</p>


<div class="figure">
<p><img src="./emacs-screen/py-pylint-1.png" alt="py-pylint-1.png" width="600" />
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5"><span class="section-number-2">5</span> Code assistant</h2>
<div class="outline-text-2" id="text-5">
<p>
I recommand "jedi" (<a href="#sec-9-3">installing jedi</a>) instead of "ropemacs", which places more
emphasis on refactoring.
</p>
</div>

<div id="outline-container-sec-5-1" class="outline-3">
<h3 id="sec-5-1"><span class="section-number-3">5.1</span> List of possible completion</h3>
<div class="outline-text-3" id="text-5-1">

<div class="figure">
<p><img src="./emacs-screen/py-jedi-1.png" alt="py-jedi-1.png" width="600" />
</p>
</div>
</div>
</div>

<div id="outline-container-sec-5-2" class="outline-3">
<h3 id="sec-5-2"><span class="section-number-3">5.2</span> Call signature help</h3>
<div class="outline-text-3" id="text-5-2">

<div class="figure">
<p><img src="./emacs-screen/py-jedi-2.png" alt="py-jedi-2.png" width="600" />
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6"><span class="section-number-2">6</span> Unit Test</h2>
<div class="outline-text-2" id="text-6">
<p>
Thanks to the graceful design of Emacs, unit test is supported without any
extra work, just use the <code>M-x compile</code> and <code>M-x recompile</code>. They work like a
charm.
</p>
</div>

<div id="outline-container-sec-6-1" class="outline-3">
<h3 id="sec-6-1"><span class="section-number-3">6.1</span> Launch unitest command</h3>
<div class="outline-text-3" id="text-6-1">

<div class="figure">
<p><img src="./emacs-screen/py-unittest-1.png" alt="py-unittest-1.png" width="600" />
</p>
</div>
</div>
</div>

<div id="outline-container-sec-6-2" class="outline-3">
<h3 id="sec-6-2"><span class="section-number-3">6.2</span> Get the result</h3>
<div class="outline-text-3" id="text-6-2">

<div class="figure">
<p><img src="./emacs-screen/py-unittest-2.png" alt="py-unittest-2.png" width="600" />
</p>
</div>
</div>
</div>

<div id="outline-container-sec-6-3" class="outline-3">
<h3 id="sec-6-3"><span class="section-number-3">6.3</span> To set default compile command for python</h3>
<div class="outline-text-3" id="text-6-3">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq compile-command <span class="org-string">"python -m unittest "</span>)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-7" class="outline-2">
<h2 id="sec-7"><span class="section-number-2">7</span> Refactoring</h2>
<div class="outline-text-2" id="text-7">
</div><div id="outline-container-sec-7-1" class="outline-3">
<h3 id="sec-7-1"><span class="section-number-3">7.1</span> Load ropemacs</h3>
<div class="outline-text-3" id="text-7-1">
<p>
<code>M-x load-ropemacs</code>
</p>

<p>
I rarely need this, therefore, by default I don't enable "ropemacs" by
default. Refer to <a href="#sec-9-4">configuring "ropemacs"</a>.
</p>
</div>
</div>

<div id="outline-container-sec-7-2" class="outline-3">
<h3 id="sec-7-2"><span class="section-number-3">7.2</span> Init the "project"</h3>
<div class="outline-text-3" id="text-7-2">
<p>
For a new project, you need to confirm "project" info first.
</p>


<div class="figure">
<p><img src="./emacs-screen/py-ropemacs-1.png" alt="py-ropemacs-1.png" width="600" />
</p>
</div>


<div class="figure">
<p><img src="./emacs-screen/py-ropemacs-2.png" alt="py-ropemacs-2.png" width="600" />
</p>
</div>
</div>
</div>

<div id="outline-container-sec-7-3" class="outline-3">
<h3 id="sec-7-3"><span class="section-number-3">7.3</span> rope-rename</h3>
<div class="outline-text-3" id="text-7-3">
</div><div id="outline-container-sec-7-3-1" class="outline-4">
<h4 id="sec-7-3-1"><span class="section-number-4">7.3.1</span> Suppose pylint complained an invalid name</h4>
<div class="outline-text-4" id="text-7-3-1">

<div class="figure">
<p><img src="./emacs-screen/py-ropemacs-4.png" alt="py-ropemacs-4.png" width="600" />
</p>
</div>
</div>
</div>

<div id="outline-container-sec-7-3-2" class="outline-4">
<h4 id="sec-7-3-2"><span class="section-number-4">7.3.2</span> With point on that variable, <code>M-x rope-rename</code> (or <code>C-c r r</code>)</h4>
<div class="outline-text-4" id="text-7-3-2">

<div class="figure">
<p><img src="./emacs-screen/py-ropemacs-5.png" alt="py-ropemacs-5.png" width="600" />
</p>
</div>
</div>
</div>

<div id="outline-container-sec-7-3-3" class="outline-4">
<h4 id="sec-7-3-3"><span class="section-number-4">7.3.3</span> And press "&lt;enter&gt;"</h4>
<div class="outline-text-4" id="text-7-3-3">

<div class="figure">
<p><img src="./emacs-screen/py-ropemacs-6.png" alt="py-ropemacs-6.png" width="600" />
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-7-4" class="outline-3">
<h3 id="sec-7-4"><span class="section-number-3">7.4</span> And more</h3>
<div class="outline-text-3" id="text-7-4">
<p>
Once again, if you prefer the GUI version of emacs, there is a menu
for you.
</p>


<div class="figure">
<p><img src="./emacs-screen/py-ropemacs-7.png" alt="py-ropemacs-7.png" width="600" />
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-8" class="outline-2">
<h2 id="sec-8"><span class="section-number-2">8</span> Re-format code with PythonTidy</h2>
<div class="outline-text-2" id="text-8">
<p>
"pylint" is good to constantly push you to follow certain code style
(say PEP8). But, for existing code not following the style, you may
want an automated tool to re-format the scripts for you. PythonTidy is
one of those.
</p>

<p>
<a href="#sec-9-5">*Install PythonTidy</a> and then, when needed, run <code>M-x
  lgfang-python-tidy</code> upon a buffer or a region.
</p>

<p>
NOTE:
</p>
<ol class="org-ol">
<li>IMHO, it is far from perfect.
</li>

<li>You can change shebang by modifing corresponding line in pythontidy. For
instance, one may want to modify it this way:

<div class="org-src-container">

<pre class="src src-python"><span class="org-variable-name">SHEBANG</span> = <span class="org-string">'#!/bin/env python'</span>
</pre>
</div>
</li>
</ol>
</div>
</div>

<div id="outline-container-sec-9" class="outline-2">
<h2 id="sec-9"><span class="section-number-2">9</span> Configuration</h2>
<div class="outline-text-2" id="text-9">
<p>
For more comprehensive and complete configuration, please refer to <a href="https://github.com/lgfang/dotfiles/blob/master/.emacs.d/init.el">my
"init.el"</a>.
</p>
</div>

<div id="outline-container-sec-9-1" class="outline-3">
<h3 id="sec-9-1"><span class="section-number-3">9.1</span> Cscope</h3>
<div class="outline-text-3" id="text-9-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-hook 'python-mode-hook (function cscope:hook))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-9-2" class="outline-3">
<h3 id="sec-9-2"><span class="section-number-3">9.2</span> Pylint</h3>
<div class="outline-text-3" id="text-9-2">
</div><div id="outline-container-sec-9-2-1" class="outline-4">
<h4 id="sec-9-2-1"><span class="section-number-4">9.2.1</span> Download</h4>
<div class="outline-text-4" id="text-9-2-1">
<p>
Pylint and its dependencies (Note that the versions change with
time).
</p>

<ol class="org-ol">
<li>logilab-common-0.60.1 :: <a href="http://www.logilab.org/848">http://www.logilab.org/848</a>
</li>

<li>pylint-1.1.0.tar.gz :: <a href="https://pypi.python.org/pypi/pylint">https://pypi.python.org/pypi/pylint</a>
</li>

<li>astroid-1.0.1.tar.gz :: <a href="https://pypi.python.org/pypi/astroid">https://pypi.python.org/pypi/astroid</a>
</li>
</ol>
</div>
</div>

<div id="outline-container-sec-9-2-2" class="outline-4">
<h4 id="sec-9-2-2"><span class="section-number-4">9.2.2</span> Install pylint</h4>
<div class="outline-text-4" id="text-9-2-2">
<p>
For each package, untar and run <code>python setup.py install</code>.
</p>

<p>
NOTE: If you are to install these packages locally on a Linux box,
run the following command instead:
</p>
<div class="org-src-container">

<pre class="src src-shell-script">mkdir -p $<span class="org-variable-name">HOME</span>/.local/lib/python2.7/site-packages
python setup.py install --prefix=$<span class="org-variable-name">HOME</span>/.local/
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-9-2-3" class="outline-4">
<h4 id="sec-9-2-3"><span class="section-number-4">9.2.3</span> Install elisp</h4>
<div class="outline-text-4" id="text-9-2-3">
<p>
In the untar-ed directory, there is sub-directory <code>elisp</code>. Copy the
<code>pylint.el</code> and <code>pylint-flymake.el</code> to <code>/usr/share/emacs/site-lisp/</code>
(or whatever path you like so long as it is in your <code>load-path</code> ).
</p>

<p>
Put the following lines into your <code>init.el</code>.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(load <span class="org-string">"pylint"</span> t nil nil)
(load <span class="org-string">"pylint-flymake"</span> t nil nil)

<span class="org-comment-delimiter">;; </span><span class="org-comment">From http://docs.pylint.org/ide-integration</span>
(<span class="org-keyword">defun</span> <span class="org-function-name">show-fly-err-at-point</span> ()
  <span class="org-doc">"If the cursor is sitting on a flymake error, display the message in the minibuffer"</span>
  (<span class="org-keyword">require</span> '<span class="org-constant">cl</span>)
  (interactive)
  (<span class="org-keyword">let</span> ((line-no (line-number-at-pos)))
    (<span class="org-keyword">dolist</span> (elem flymake-err-info)
      (<span class="org-keyword">if</span> (eq (car elem) line-no)
      (<span class="org-keyword">let</span> ((err (car (second elem))))
        (message <span class="org-string">"%s"</span> (flymake-ler-text err)))))))
(add-hook 'post-command-hook 'show-fly-err-at-point)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-9-2-4" class="outline-4">
<h4 id="sec-9-2-4"><span class="section-number-4">9.2.4</span> Hot keys</h4>
<div class="outline-text-4" id="text-9-2-4">
<p>
Do not forget to bind hot keys for flymake if you have not yet:
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(define-key global-map (kbd <span class="org-string">"C-c p"</span>) 'flymake-goto-prev-error)
(define-key global-map (kbd <span class="org-string">"C-c n"</span>) 'flymake-goto-prev-error)
(define-key global-map (kbd <span class="org-string">"C-c m"</span>) 'flymake-display-err-menu-for-current-line)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-9-2-5" class="outline-4">
<h4 id="sec-9-2-5"><span class="section-number-4">9.2.5</span> The "flycheck"</h4>
<div class="outline-text-4" id="text-9-2-5">
<p>
At the time of this writing, a package named <a href="https://github.com/flycheck/flycheck">"flycheck"</a> seems to be superior
to the built-in flymake. Hence, I recommend you use that if possible. It
requires no explicit configuration: just install pylint and flycheck, then
it works out of box.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-9-3" class="outline-3">
<h3 id="sec-9-3"><span class="section-number-3">9.3</span> Jedi</h3>
<div class="outline-text-3" id="text-9-3">
<ol class="org-ol">
<li>Install "virtualenv" via "pip"
<pre class="example">
sudo pip install virtualenv
</pre>
</li>

<li>Install "jedi" using "package"
<pre class="example">
M-x package-install RET jedi RET
</pre>
</li>

<li>Install jedi server from within emacs
<pre class="example">
M-x jedi:install-server RET
</pre>
</li>

<li>Add the following to <code>init.el</code>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span class="org-keyword">when</span> (functionp 'jedi:setup)
  (add-hook 'python-mode-hook 'jedi:setup)
  (setq jedi:complete-on-dot t))
</pre>
</div>
</li>
</ol>
</div>
</div>

<div id="outline-container-sec-9-4" class="outline-3">
<h3 id="sec-9-4"><span class="section-number-3">9.4</span> Ropemacs</h3>
<div class="outline-text-3" id="text-9-4">
</div><div id="outline-container-sec-9-4-1" class="outline-4">
<h4 id="sec-9-4-1"><span class="section-number-4">9.4.1</span> Install</h4>
<div class="outline-text-4" id="text-9-4-1">
<ol class="org-ol">
<li>Download

<dl class="org-dl">
<dt> pymacs </dt><dd><a href="https://github.com/pinard/Pymacs">https://github.com/pinard/Pymacs</a>
</dd>
<dt> ropemacs </dt><dd><a href="https://github.com/python-rope/ropemacs">https://github.com/python-rope/ropemacs</a>
</dd>
</dl>
</li>

<li>Install

<div class="org-src-container">

<pre class="src src-shell-script"><span class="org-comment-delimiter">#</span><span class="org-comment">* Pymacs</span>
<span class="org-builtin">cd</span> ~/Downloads/Pymacs-master
make check                      <span class="org-comment-delimiter"># </span><span class="org-comment">Check if pymacs would work</span>
sudo make install               <span class="org-comment-delimiter"># </span><span class="org-comment">Install python part</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">to verify the installation</span>
python -c <span class="org-string">'import Pymacs'</span>
sudo cp pymacs.el /usr/local/share/emacs/site-lisp/ <span class="org-comment-delimiter"># </span><span class="org-comment">emacs part</span>

<span class="org-comment-delimiter">#</span><span class="org-comment">* Rope and Ropemode</span>
sudo pip install rope ropemode

<span class="org-comment-delimiter">#</span><span class="org-comment">* Ropemacs</span>
<span class="org-builtin">cd</span> ~/Downloads/ropemacs-master/
sudo python setup.py install
</pre>
</div>
</li>
</ol>
</div>
</div>

<div id="outline-container-sec-9-4-2" class="outline-4">
<h4 id="sec-9-4-2"><span class="section-number-4">9.4.2</span> Configure Emacs</h4>
<div class="outline-text-4" id="text-9-4-2">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;; </span><span class="org-comment">ropemacs and pymacs</span>
(setq ropemacs-enable-shortcuts t
      ropemacs-global-prefix nil        <span class="org-comment-delimiter">; </span><span class="org-comment">the default one already used</span>
      ropemacs-guess-project t
      ropemacs-confirm-saving 'nil)
(autoload 'pymacs-apply <span class="org-string">"pymacs"</span>)
(autoload 'pymacs-call <span class="org-string">"pymacs"</span>)
(autoload 'pymacs-eval <span class="org-string">"pymacs"</span> nil t)
(autoload 'pymacs-exec <span class="org-string">"pymacs"</span> nil t)
(autoload 'pymacs-load <span class="org-string">"pymacs"</span> nil t)
(autoload 'pymacs-autoload <span class="org-string">"pymacs"</span>)
(<span class="org-keyword">defun</span> <span class="org-function-name">load-ropemacs</span> ()
  (interactive)
  (<span class="org-keyword">when</span> (and (<span class="org-keyword">require</span> '<span class="org-constant">pymacs</span> nil t)
             (pymacs-load <span class="org-string">"ropemacs"</span> <span class="org-string">"rope-"</span> t))
    <span class="org-comment-delimiter">;; </span><span class="org-comment">(ac-ropemacs-setup)       ; this does not work?</span>
    (define-key python-mode-map (kbd <span class="org-string">"M-/"</span>) 'rope-code-assist)))
</pre>
</div>

<p>
Since I do not really need heavy weight tool for trivial scripts, I
did not add <code>load-ropemacs</code> to <code>python-mode-hook</code>.
</p>
</div>
</div>

<div id="outline-container-sec-9-4-3" class="outline-4">
<h4 id="sec-9-4-3"><span class="section-number-4">9.4.3</span> Verify pymacs</h4>
<div class="outline-text-4" id="text-9-4-3">
<ol class="org-ol">
<li>In a "clean" directory, open a python file.
</li>

<li><code>M-x load-ropemacs</code>
</li>

<li>Verify if Pymacs works

<pre class="example">
M-x pymacs-eval &lt;ret&gt; 2 * 3 &lt;ret&gt;
</pre>
</li>
</ol>
</div>
</div>
</div>

<div id="outline-container-sec-9-5" class="outline-3">
<h3 id="sec-9-5"><span class="section-number-3">9.5</span> Install PythonTidy</h3>
<div class="outline-text-3" id="text-9-5">
<ol class="org-ol">
<li>Download PythonTidy

<p>
From <a href="https://pypi.python.org/pypi/PythonTidy">https://pypi.python.org/pypi/PythonTidy</a> and put it somewhere
in your "PATH" and rename it as "PythonTidy.py".
</p>
</li>

<li>Put the following in your <code>init.el</code>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;; </span><span class="org-comment">Download PythonTidy and put it into PATH as "pythontidy"</span>
(<span class="org-keyword">defun</span> <span class="org-function-name">lgfang-python-tidy</span> ()
  (interactive)
  (<span class="org-keyword">if</span> (not (string= mode-name <span class="org-string">"Python"</span>))
      (message <span class="org-string">"Buffer not is python mode"</span>)
    (<span class="org-keyword">let</span> ((beg (<span class="org-keyword">if</span> (region-active-p) (region-beginning) (point-min)))
          (end (<span class="org-keyword">if</span> (region-active-p) (region-end) (point-max))))
      (<span class="org-keyword">save-excursion</span>
        (shell-command-on-region beg end <span class="org-string">"pythontidy"</span> nil t)))))
</pre>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">

     <br/>
     <p>
     <span class="date">Created: 2016-09-15 Thu 10:01</span> by <span class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 24.5.1 (<a href="http://orgmode.org">Org</a> mode 8.2.10)</span>
     </p>

     <!-- DISQUS  -->
     <div id="disqus_thread"></div>
     <script type="text/javascript">
         /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
         var disqus_shortname = 'lgfang'; // required: replace example with your forum shortname

         /* * * DON'T EDIT BELOW THIS LINE * * */
         (function() {
             var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
             dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
             (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
         })();
     </script>
     <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
     <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

     <!-- google analytic -->
     <script>
       (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
       (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
       m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
       })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

       ga('create', 'UA-84711243-1', 'auto');
       ga('send', 'pageview');

     </script>
</div>
</div>
</body>
</html>
